# Phase 2: Ghost Mode GUI Implementation

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### ‚úÖ Transparent Overlay Window
- **Frameless design** - –±–µ–∑ —Ä–∞–º–æ–∫ –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞
- **Always on Top** - –ø–æ–≤–µ—Ä—Ö –≤—Å–µ—Ö –æ–∫–æ–Ω
- **Tool window** - –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –ø–∞–Ω–µ–ª–∏ –∑–∞–¥–∞—á
- **Translucent background** - –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω
- **Draggable** - –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –º—ã—à—å—é –∑–∞ –ª—é–±—É—é –æ–±–ª–∞—Å—Ç—å

### ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Backend
- **Full integration** —Å Audio/STT/LLM –º–æ–¥—É–ª—è–º–∏ –∏–∑ Phase 1
- **Real-time processing** –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
- **Thread-safe communication** —á–µ—Ä–µ–∑ Qt signals
- **Error handling** –∏ —Å—Ç–∞—Ç—É—Å –∏–Ω–¥–∏–∫–∞—Ü–∏—è

### ‚úÖ User Interface Elements
- **Status indicator** —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
- **Question display** (—Å–µ—Ä—ã–π –∫—É—Ä—Å–∏–≤)
- **Answer display** (–±–µ–ª—ã–π, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
- **Control buttons** (Pause, Clear, Hide)
- **System monitoring** (CPU/RAM usage bars)
- **Latency indicator**

## üìÅ –§–∞–π–ª—ã Phase 2

```
deck/
‚îú‚îÄ‚îÄ ghost_gui.py          # –û—Å–Ω–æ–≤–Ω–æ–π GUI —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ quick_gui_test.py     # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ run_ghost.bat         # Batch —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø—É—Å–∫–∞
‚îî‚îÄ‚îÄ gui_phase2.md         # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—á–∞—Ç—å —Å —ç—Ç–æ–≥–æ):
```bash
python quick_gui_test.py
```

### –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è:
```bash
# –ß–µ—Ä–µ–∑ batch —Ñ–∞–π–ª:
run_ghost.bat

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
python ghost_gui.py
```

## üß™ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤ Quick Test

1. **Overlay functionality:**
   - –û—Ç–∫—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä/IDE –Ω–∞ –ø–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω
   - –û–∫–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –í–ò–î–ù–û –ø–æ–≤–µ—Ä—Ö –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

2. **Readability:**
   - –¢–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Ç–∞–µ–º –Ω–∞ —Ç–µ–º–Ω–æ–º –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ–º —Ñ–æ–Ω–µ
   - –®—Ä–∏—Ñ—Ç—ã –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (12px –æ—Å–Ω–æ–≤–Ω–æ–π, 11px –∫–Ω–æ–ø–∫–∏)

3. **Controls:**
   - –õ–µ–≤—ã–π –∫–ª–∏–∫ + drag - –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –æ–∫–Ω–∞
   - –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ - –∑–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞
   - –ö–Ω–æ–ø–∫–∞ "‚úï Close" - –∑–∞–∫—Ä—ã—Ç–∏–µ –æ–∫–Ω–∞

4. **Performance:**
   - –û–∫–Ω–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –º–µ—Ä—Ü–∞—Ç—å
   - –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–ª–∞–≤–Ω—ã–º
   - –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

## üé® –î–∏–∑–∞–π–Ω —Ä–µ—à–µ–Ω–∏—è

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:
- **–§–æ–Ω:** rgba(15, 15, 15, 240) - –ø–æ—á—Ç–∏ —á–µ—Ä–Ω—ã–π —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é
- **–°—Ç–∞—Ç—É—Å (–≥–æ—Ç–æ–≤):** #00FF99 (–∑–µ–ª–µ–Ω—ã–π)
- **–°—Ç–∞—Ç—É—Å (–¥—É–º–∞—é):** #FFAA00 (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
- **–°—Ç–∞—Ç—É—Å (–æ—à–∏–±–∫–∞):** #FF5555 (–∫—Ä–∞—Å–Ω—ã–π)
- **–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞:** #AAAAAA (—Å–µ—Ä—ã–π)
- **–¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞:** #FFFFFF (–±–µ–ª—ã–π)
- **–ö–Ω–æ–ø–∫–∏:** rgba(60, 60, 60, 200) (—Ç–µ–º–Ω–æ-—Å–µ—Ä—ã–µ)

### –†–∞–∑–º–µ—Ä—ã:
- **–®–∏—Ä–∏–Ω–∞ –æ–∫–Ω–∞:** 450px
- **–í—ã—Å–æ—Ç–∞ –æ–∫–Ω–∞:** 350px
- **–ü–æ–∑–∏—Ü–∏—è:** top-right corner —ç–∫—Ä–∞–Ω–∞
- **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å:** 95%

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### Window Flags:
```python
Qt.WindowType.FramelessWindowHint      # –ë–µ–∑ —Ä–∞–º–æ–∫
Qt.WindowType.WindowStaysOnTopHint     # –ü–æ–≤–µ—Ä—Ö –≤—Å–µ—Ö –æ–∫–æ–Ω
Qt.WindowType.Tool                     # –ù–µ –≤ –ø–∞–Ω–µ–ª–∏ –∑–∞–¥–∞—á
Qt.WindowType.WindowDoesNotAcceptFocus # –ù–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç —Ñ–æ–∫—É—Å
```

### Transparency Settings:
```python
setAttribute(Qt.WidgetAttribute.WA_TranslucentBackground)  # –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω
setWindowOpacity(0.95)  # 95% –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
```

### Drag Implementation:
```python
# –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏
drag_position = event.globalPosition().toPoint() - self.frameGeometry().topLeft()

# –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏
self.move(event.globalPosition().toPoint() - drag_position)
```

## ‚ö° –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Backend

### BackendController Class:
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º–∏ –º–æ–¥—É–ª—è–º–∏ Phase 1
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Qt signals –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å GUI
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –º–æ–¥—É–ª–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—á–µ—Ä–µ–¥–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

### Signal System:
```python
status_update = pyqtSignal(str)        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
question_detected = pyqtSignal(str)    # –û–±–Ω–∞—Ä—É–∂–µ–Ω –≤–æ–ø—Ä–æ—Å
answer_ready = pyqtSignal(str, str)    # –ì–æ—Ç–æ–≤ –æ—Ç–≤–µ—Ç
error_occurred = pyqtSignal(str)       # –û—à–∏–±–∫–∞
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### Immediate:
1. [x] –ó–∞–ø—É—Å—Ç–∏—Ç—å quick_gui_test.py
2. [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å overlay functionality
3. [x] –£–±–µ–¥–∏—Ç—å—Å—è –≤ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç–∞
4. [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å full version —Å backend

### Optimization:
- [ ] Fine-tune transparency levels
- [ ] Adjust font sizes for different DPI
- [ ] Add hotkey support (F8 –¥–ª—è –æ—á–∏—Å—Ç–∫–∏)
- [ ] Implement proper pause/resume logic

### Advanced Features:
- [ ] History of questions/answers
- [ ] Customizable positioning
- [ ] Multiple monitor support
- [ ] Export functionality

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### Potential Issues:
1. **Focus stealing** - –∏–Ω–æ–≥–¥–∞ –æ–∫–Ω–æ –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å —Ñ–æ–∫—É—Å
2. **Performance** - –Ω–∞ —Å–ª–∞–±—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –≤–æ–∑–º–æ–∂–Ω—ã –∑–∞–¥–µ—Ä–∂–∫–∏
3. **DPI scaling** - –Ω–∞ –≤—ã—Å–æ–∫–∏—Ö DPI —Ç–µ–∫—Å—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–ª–∫–∏–º

### Solutions:
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `WindowDoesNotAcceptFocus` flag
2. –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π GUI
3. –î–æ–±–∞–≤–∏—Ç—å DPI-aware scaling

## üìä Performance Targets

- **Memory usage:** < 500MB –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–∞–º—è—Ç–∏
- **CPU usage:** < 5% –≤ idle —Å–æ—Å—Ç–æ—è–Ω–∏–∏
- **Response time:** < 100ms –¥–ª—è GUI –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- **Overlay smoothness:** 60 FPS –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏

---

**–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** –ó–∞–ø—É—Å—Ç–∏ `python quick_gui_test.py` –∏ –¥–∞–π —Ñ–∏–¥–±—ç–∫ –ø–æ –¥–∏–∑–∞–π–Ω—É –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.